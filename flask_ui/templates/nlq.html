{% extends "base.html" %}

{% block content %}
  <h2>ðŸ§  Natural Language Query</h2>
  <form method="POST">
    <input type="text" name="prompt" value="{{ prompt }}" style="width: 70%" placeholder="e.g. Show all users from India" />
    <button type="submit">Run</button>
  </form>

  {% if error %}
    <div class="flash-error">Error: {{ error }}</div>
  {% elif rows_affected is not none %}
    <div class="flash-success">âœ… Rows affected: {{ rows_affected }}</div>
  {% elif result %}
    <table>
      <thead>
        <tr>
          {% for key in result[0].keys() %}
            <th>{{ key }}</th>
          {% endfor %}
        </tr>
      </thead>
      <tbody>
        {% for row in result %}
          <tr>
            {% for val in row.values() %}
              <td>{{ val }}</td>
            {% endfor %}
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% endif %}
{% endblock %}
